name: Update Hugo Netlify Toml

on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 * * *"

defaults:
  run:
    shell: pwsh

jobs:
  update_hugo_modules:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Update Hugo Version for Netlify
        id: update-hugo-version-netlify
        uses: platenio/action-netlify-toml-update-hugo@v1
      - name: Create Pull Request
        id: createpr
        uses: peter-evans/create-pull-request@v3
        with:
          commit-message: (MAINT) Update Hugo version pin in Netlify TOML
          title: (MAINT) Update Hugo version pin in Netlify TOML
          body: |
            Updated Hugo version pin in netlify config file to: `${{ steps.update-hugo-version-netlify.outputs.latestVersion }}`

            Auto-generated by [create-pull-request][1] and [update-hugo-netlify-toml][1]

            [1]: https://github.com/peter-evans/create-pull-request
            [2]: https://github.com/platenio/action-update-hugo-netlify-toml
          branch: update-hugo-netlify-toml
          base: main
          delete-branch: true
